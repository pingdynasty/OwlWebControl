<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <title>Theremin Bollards</title>
  <script src="jquery.min.js"></script>
  <!-- <script src="WebMIDIAPI.js"></script> -->
  <script src="midiclient.js"></script>
  <script src="OpenWareMidiControl.js"></script>
  <script src="owlcmd.js"></script>
  <script src="owlrack.js"></script>
</head>
<body>
  <h2><span id="firmwareversion">Theremin Bollards Control Panel</span></h2>
  <div>
    <p><button id="connect">Connect</button> <span id="ourstatus">Not Connected</span></p>
    <!-- <p>Poll <input id="poll" type="checkbox" onclick="setMonitor(this.checked); return true;"/></p> -->
  </div>

  <div>
    <h3>Theremin 1 and 2</h3>
    <!-- <ul> -->
    <!--   <li> -->
    <p>
	<select id="p1" onchange="HoxtonOwl.midiClient.sendChCc(0, OpenWareMidiControl.PATCH_PARAMETER_A, Math.floor(this.value/5))" style="width: 80px;">
	  <option value="10">1</option>
	  <option value="21">2</option>
	  <option value="31">3</option>
	  <option value="42">4</option>
	  <option value="52">5</option>
	  <option value="63">6</option>
	  <option value="74">7</option>
	  <option value="84">8</option>
	  <option value="95">9</option>
	  <option value="105">10</option>
	  <option value="116">Bypass</option>
	  <option value="127">Manual</option>
	</select> Preset</p>
  <!-- </li> -->
  <!-- <li> -->
  <p>
    <select id="p2" onchange="HoxtonOwl.midiClient.sendChCc(0, OpenWareMidiControl.PATCH_PARAMETER_B, Math.floor(this.value/5))" style="width: 80px;">
	  <option value="0">1</option>
	  <option value="25">2</option>
	  <option value="50">3</option>
	  <option value="76">4</option>
	  <option value="101">5</option>
    </select> Octave
    </p>
    <p><button onclick="HoxtonOwl.midiClient.sendChCc(0, OpenWareMidiControl.PATCH_PARAMETER_A, Math.floor(116/5)); p1.value=116;"> Bypass</button></p>
    <p><button onclick="HoxtonOwl.midiClient.sendChCc(0, OpenWareMidiControl.PATCH_PARAMETER_A, Math.floor(127/5)); p1.value=127;"> Manual</button></p>
    
  </div>

  <div>OWL 1
    <p>Patch Parameters</p>
    <ul>
      <li><input id="o1s75" type="range" value="0" min="0" max="127" onchange="sendParameter(1, OpenWareMidiControl.PATCH_PARAMETER_AA, this.value); o1o75.value = Math.round(this.value/16)"/> <output id="o1o75"></output> Scale</li>
      <li><input id="o1s20" type="range" value="0" min="0" max="127" onchange="sendParameter(1, OpenWareMidiControl.PATCH_PARAMETER_A, this.value); o1o20.value = this.value/127.0;"/> Oscillator Type <output id="o1o20"></output></li>
      <li><input id="o1s21" type="range" value="0" min="0" max="127" onchange="sendParameter(1, OpenWareMidiControl.PATCH_PARAMETER_B, this.value); o1o21.value = this.value/127.0"/> Wave <output id="o1o21"></output></li>
      <li><input id="o1s22" type="range" value="0" min="0" max="127" onchange="sendParameter(1, OpenWareMidiControl.PATCH_PARAMETER_C, this.value); o1o22.value = this.value/127.0"/> Gain <output id="o1o22"></output></li>
      <li><input id="o1s23" type="range" value="0" min="0" max="127" onchange="sendParameter(1, OpenWareMidiControl.PATCH_PARAMETER_D, this.value); o1o23.value = this.value/127.0"/> Portamento <output id="o1o23"></output></li>
      <li><input id="o1s1" type="range" value="0" min="0" max="127" onchange="sendParameter(1, OpenWareMidiControl.PATCH_PARAMETER_F, this.value); o1o24.value = this.value/127.0"/> Octave <output id="o1o24"></output></li>
    </ul>
    <p>Device Settings</p>
    <ul>
    <li><input type="range" value="13" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(1, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'IG'+this.value); $('#ig1').text((this.value));"/><span id="ig1"></span> Input Gain</li>
    <li><input type="range" value="60" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(1, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'OG'+this.value);$('#og1').text(this.value);"/><span id="og1"></span> Output Gain</li>
    <!-- <li><button onclick="HoxtonOwl.midiClient.sendSysexIdCommand(1, OpenWareMidiSysexCommand.SYSEX_SETTINGS_RESET);"> Reset Settings</button></li> -->
    <li><button onclick="HoxtonOwl.midiClient.sendSysexIdCommand(1, OpenWareMidiSysexCommand.SYSEX_SETTINGS_STORE);"> Store Settings</button></li>
    </ul>
  </div>

  <div>OWL 2
    <p>Patch Parameters</p>
    <ul>
      <li><input id="o2s75" type="range" value="0" min="0" max="127" onchange="sendParameter(2, OpenWareMidiControl.PATCH_PARAMETER_AA, this.value)"/> DroneBox / Dub Delay / Phaser </li>
      <li><input id="o2s20" type="range" value="0" min="0" max="127" onchange="sendParameter(2, OpenWareMidiControl.PATCH_PARAMETER_A, this.value)"/> Coarse Pitch / Time / Rate</li>
      <li><input id="o2s21" type="range" value="0" min="0" max="127" onchange="sendParameter(2, OpenWareMidiControl.PATCH_PARAMETER_B, this.value)"/> Fine Pitch / Feedback / Depth</li>
      <li><input id="o2s22" type="range" value="0" min="0" max="127" onchange="sendParameter(2, OpenWareMidiControl.PATCH_PARAMETER_C, this.value)"/> Decay / Tone / Feedback</li>
      <li><input id="o2s23" type="range" value="0" min="0" max="127" onchange="sendParameter(2, OpenWareMidiControl.PATCH_PARAMETER_D, this.value)"/> Mix / Mix / --</li>

    </ul>
    <p>Device Settings</p>
    <ul>
    <li><input type="range" value="13" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(2, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'IG'+this.value); $('#ig2').text((this.value));"/><span id="ig2"></span> Input Gain</li>
    <li><input type="range" value="60" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(2, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'OG'+this.value);$('#og2').text(this.value);"/><span id="og2"></span> Output Gain</li>
    <li><button onclick="HoxtonOwl.midiClient.sendSysexIdCommand(2, OpenWareMidiSysexCommand.SYSEX_SETTINGS_STORE);"> Store Settings</button></li>
    </ul>
  </div>

  <div>OWL 3
    <p>Patch Parameters</p>
    <ul>
      <li><input id="o3s56" type="range" value="0" min="0" max="127" onchange="sendParameter(3, OpenWareMidiControl.PATCH_PARAMETER_AA, this.value)"/> Scale</li>
      <li><input id="o3s20" type="range" value="0" min="0" max="127" onchange="sendParameter(3, OpenWareMidiControl.PATCH_PARAMETER_A, this.value)"/> Oscillator Type</li>
      <li><input id="o3s21" type="range" value="0" min="0" max="127" onchange="sendParameter(3, OpenWareMidiControl.PATCH_PARAMETER_B, this.value)"/> Wave</li>
      <li><input id="o3s22" type="range" value="0" min="0" max="127" onchange="sendParameter(3, OpenWareMidiControl.PATCH_PARAMETER_C, this.value)"/> Gain</li>
      <li><input id="o3s23" type="range" value="0" min="0" max="127" onchange="sendParameter(3, OpenWareMidiControl.PATCH_PARAMETER_D, this.value)"/> Portamento</li>
      <li><input id="o3s1" type="range" value="0" min="0" max="127" onchange="sendParameter(3, OpenWareMidiControl.PATCH_PARAMETER_F, this.value)"/> Octave</li>
    <p>Device Settings</p>
    <ul>
    <li><input type="range" value="13" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(3, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'IG'+this.value); $('#ig3').text((this.value));"/><span id="ig3"></span> Input Gain</li>
    <li><input type="range" value="60" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(3, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'OG'+this.value);$('#og3').text(this.value);"/><span id="og3"></span> Output Gain</li>
    <li><button onclick="HoxtonOwl.midiClient.sendSysexIdCommand(3, OpenWareMidiSysexCommand.SYSEX_SETTINGS_STORE);"> Store Settings</button></li>
    </ul>
</ul>
  </div>

  <div>OWL 4
    <p>Patch Parameters</p>
    <ul>
      <li><input id="o4s56" type="range" value="0" min="0" max="127" onchange="sendParameter(4, OpenWareMidiControl.PATCH_PARAMETER_AA, this.value)"/> DroneBox / Dub Delay / Phaser </li>
      <li><input id="o4s20" type="range" value="0" min="0" max="127" onchange="sendParameter(4, OpenWareMidiControl.PATCH_PARAMETER_A, this.value)"/> Coarse Pitch / Time / Rate</li>
      <li><input id="o4s21" type="range" value="0" min="0" max="127" onchange="sendParameter(4, OpenWareMidiControl.PATCH_PARAMETER_B, this.value)"/> Fine Pitch / Feedback / Depth</li>
      <li><input id="o4s22" type="range" value="0" min="0" max="127" onchange="sendParameter(4, OpenWareMidiControl.PATCH_PARAMETER_C, this.value)"/> Decay / Tone / Feedback</li>
      <li><input id="o4s23" type="range" value="0" min="0" max="127" onchange="sendParameter(4, OpenWareMidiControl.PATCH_PARAMETER_D, this.value)"/> Mix / Mix / --</li>
</ul>
    <p>Device Settings</p>
    <ul>
    <li><input type="range" value="13" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(4, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'IG'+this.value); $('#ig4').text((this.value));"/><span id="ig4"></span> Input Gain</li>
    <li><input type="range" value="60" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(4, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'OG'+this.value);$('#og4').text(this.value);"/><span id="og4"></span> Output Gain</li>
    <li><button onclick="HoxtonOwl.midiClient.sendSysexIdCommand(4, OpenWareMidiSysexCommand.SYSEX_SETTINGS_STORE);"> Store Settings</button></li>
    </ul>
</ul>
  </div>

<p>  
    <!-- <input type="range" value="121" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexText(OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'IG'+this.value);"/> Input Gain -->

    <!-- <input type="range" value="121" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexText(OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'OG'+this.value);"/> Output Gain -->
</p>

  <p><button onclick="HoxtonOwl.midiClient.sendSysexIdCommand(3, OpenWareMidiSysexCommand.SYSEX_FLASH_ERASE);"> Erase Flash</button></p>


  <!-- sensible dB controls: -->
    <!-- <p><input type="range" value="88" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(1, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'IG'+this.value); $('#ig1').text((this.value / 4)*1.5-34.5);"/><span id="ig1">-6dB</span> Input Gain</p>

   <p><input type="range" value="121" min="0" max="127" onchange="HoxtonOwl.midiClient.sendSysexIdText(1, OpenWareMidiSysexCommand.SYSEX_CONFIGURATION_COMMAND, 'OG'+this.value);$('#og1').text(this.value -121);"/><span id="og1">0</span>dB Output Gain</p> 

   <p><button onclick="HoxtonOwl.midiClient.sendSysexCommand(OpenWareMidiSysexCommand.SYSEX_SETTINGS_RESET);"> Reset Settings</button></p>
  <p><button onclick="HoxtonOwl.midiClient.sendSysexCommand(OpenWareMidiSysexCommand.SYSEX_SETTINGS_STORE);"> Store Settings</button></p>


  <p><button onclick="HoxtonOwl.midiClient.sendSysexIdCommand(2, OpenWareMidiSysexCommand.SYSEX_FLASH_ERASE);"> Erase Flash</button></p>

    <!-- <li><input id="o1s7" type="range" value="121" min="0" max="127" onchange="HoxtonOwl.midiClient.sendChCc(1, 0x07, this.value)"/> Volume</li> -->
  -->

</body>
</html>
